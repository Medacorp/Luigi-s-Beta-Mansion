execute if entity @s[tag=boo_woods_foyer] unless data storage luigis_mansion:data current_state.current_data{blackout:1b} run tag @s add locked
execute if entity @s[tag=hallway_1_parlor] unless data storage luigis_mansion:data {obtained_parlor_key:1b} run tag @s add locked
execute if entity @s[tag=hallway_1_parlor] if data storage luigis_mansion:data {used_parlor_key:0b,obtained_parlor_key:1b} run tag @s add unlock
execute if entity @s[tag=parlor_anteroom] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{anteroom:1b}} run tag @s add locked
execute if entity @s[tag=parlor_anteroom] if data storage luigis_mansion:data current_state.current_data{used_keys:{anteroom:0b},obtained_keys:{anteroom:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_1_hallway_2] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{hallway_2:1b}} run tag @s add locked
execute if entity @s[tag=hallway_1_hallway_2] if data storage luigis_mansion:data current_state.current_data{used_keys:{hallway_2:0b},obtained_keys:{hallway_2:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_2_master_bedroom] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{master_bedroom:1b}} run tag @s add locked
execute if entity @s[tag=hallway_2_master_bedroom] if data storage luigis_mansion:data current_state.current_data{used_keys:{master_bedroom:0b},obtained_keys:{master_bedroom:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_2_nursery] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{nursery:1b}} run tag @s add locked
execute if entity @s[tag=hallway_2_nursery] if data storage luigis_mansion:data current_state.current_data{used_keys:{nursery:0b},obtained_keys:{nursery:1b}} run tag @s add unlock
execute if entity @s[tag=foyer_hallway_3] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{hallway_3:1b}} run tag @s add locked
execute if entity @s[tag=foyer_hallway_3] if data storage luigis_mansion:data current_state.current_data{used_keys:{hallway_3:0b},obtained_keys:{hallway_3:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_4_ball_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{ball_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_4_ball_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{ball_room:0b},obtained_keys:{ball_room:1b}} run tag @s add unlock
execute if entity @s[tag=ball_room_storage_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{storage_room:1b}} run tag @s add locked
execute if entity @s[tag=ball_room_storage_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{storage_room:0b},obtained_keys:{storage_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_5_washroom] store result score #temp Boos run data get storage luigis_mansion:data current_state.current_data.boo_counter
execute if entity @s[tag=hallway_5_washroom] unless score #temp Boos matches 5.. run tag @s add locked
scoreboard players reset #temp Boos
execute if entity @s[tag=hallway_3_fortune_tellers_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{fortune_tellers_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_3_fortune_tellers_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{fortune_tellers_room:0b},obtained_keys:{fortune_tellers_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_3_laundry_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{laundry_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_3_laundry_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{laundry_room:0b},obtained_keys:{laundry_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_5_conservatory] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{conservatory:1b}} run tag @s add locked
execute if entity @s[tag=hallway_5_conservatory] if data storage luigis_mansion:data current_state.current_data{used_keys:{conservatory:0b},obtained_keys:{conservatory:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_4_dining_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{dining_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_4_dining_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{dining_room:0b},obtained_keys:{dining_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_6_courtyard] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{courtyard:1b}} run tag @s add locked
execute if entity @s[tag=hallway_6_courtyard] if data storage luigis_mansion:data current_state.current_data{used_keys:{courtyard:0b},obtained_keys:{courtyard:1b}} run tag @s add unlock
execute if entity @s[tag=courtyard_rec_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{rec_room:1b}} run tag @s add locked
execute if entity @s[tag=courtyard_rec_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{rec_room:0b},obtained_keys:{rec_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_5_hallway_8] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{hallway_8:1b}} run tag @s add locked
execute if entity @s[tag=hallway_5_hallway_8] if data storage luigis_mansion:data current_state.current_data{used_keys:{hallway_8:0b},obtained_keys:{hallway_8:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_5_billiards_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{billiards_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_5_billiards_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{billiards_room:0b},obtained_keys:{billiards_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_2_the_twins_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{the_twins_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_2_the_twins_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{the_twins_room:0b},obtained_keys:{the_twins_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_15_safari_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{safari_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_15_safari_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{safari_room:0b},obtained_keys:{safari_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_17_balcony_2] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{balcony_2:1b}} run tag @s add locked
execute if entity @s[tag=hallway_17_balcony_2] if data storage luigis_mansion:data current_state.current_data{used_keys:{balcony_2:0b},obtained_keys:{balcony_2:1b}} run tag @s add unlock
execute if entity @s[tag=balcony_2_hallway_18] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{hallway_18:1b}} run tag @s add locked
execute if entity @s[tag=balcony_2_hallway_18] if data storage luigis_mansion:data current_state.current_data{used_keys:{hallway_18:0b},obtained_keys:{hallway_18:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_7_breaker_room] unless data storage luigis_mansion:data current_state.current_data{blackout:1b,obtained_keys:{breaker_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_7_breaker_room] if data storage luigis_mansion:data current_state.current_data{blackout:1b,used_keys:{breaker_room:0b},obtained_keys:{breaker_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_7_cellar] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{cellar:1b}} run tag @s add locked
execute if entity @s[tag=hallway_7_cellar] if data storage luigis_mansion:data current_state.current_data{used_keys:{cellar:0b},obtained_keys:{cellar:1b}} run tag @s add unlock
execute if entity @s[tag=telephone_room_clockwork_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{clockwork_room:1b}} run tag @s add locked
execute if entity @s[tag=telephone_room_clockwork_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{clockwork_room:0b},obtained_keys:{clockwork_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_19_armory] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{armory:1b}} run tag @s add locked
execute if entity @s[tag=hallway_19_armory] if data storage luigis_mansion:data current_state.current_data{used_keys:{armory:0b},obtained_keys:{armory:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_21_pipe_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{pipe_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_21_pipe_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{pipe_room:0b},obtained_keys:{pipe_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_20_cold_storage] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{cold_storage:1b}} run tag @s add locked
execute if entity @s[tag=hallway_20_cold_storage] if data storage luigis_mansion:data current_state.current_data{used_keys:{cold_storage:0b},obtained_keys:{cold_storage:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_13_sitting_room] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{sitting_room:1b}} run tag @s add locked
execute if entity @s[tag=hallway_13_sitting_room] if data storage luigis_mansion:data current_state.current_data{used_keys:{sitting_room:0b},obtained_keys:{sitting_room:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_17_the_artists_studio] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{the_artists_studio:1b}} run tag @s add locked
execute if entity @s[tag=hallway_17_the_artists_studio] if data storage luigis_mansion:data current_state.current_data{used_keys:{the_artists_studio:0b},obtained_keys:{the_artists_studio:1b}} run tag @s add unlock
execute if entity @s[tag=hallway_22_secret_altar] if entity @e[tag=king_boo,tag=talk,limit=1] run tag @s add locked
execute if entity @s[tag=hallway_22_secret_altar] if data storage luigis_mansion:data current_state.current_data.rooms.secret_altar{cleared:1b} if entity @e[x=636.5,y=94,z=-17.5,distance=..0.7,type=minecraft:item_frame,nbt={Item:{id:"minecraft:painting"}},limit=1] run tag @s add locked
execute if entity @s[tag=hallway_22_secret_altar] unless data storage luigis_mansion:data current_state.current_data{obtained_keys:{secret_altar:1b}} run tag @s add locked
execute if entity @s[tag=hallway_22_secret_altar] if data storage luigis_mansion:data current_state.current_data{used_keys:{secret_altar:0b},obtained_keys:{secret_altar:1b}} run tag @s add unlock